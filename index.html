<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Real-Time Top Gainers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f5f5f5; }
        .container { margin-top: 30px; }
        table th, table td { text-align: center; }
    </style>
</head>
<body>
<div class="container">
    <h1 class="text-center mb-4">ðŸ“ˆ Real-Time Top Gainers Table</h1>

    <table class="table table-striped table-bordered bg-white">
        <thead class="table-dark">
        <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Change %</th>
            <th>Volume</th>
        </tr>
        </thead>
        <tbody id="gainersTable"></tbody>
    </table>
</div>

<script>
async function loadGainers() {
    try {
        const res = await fetch("/api/gainers");
        const data = await res.json();

        const tbody = document.getElementById("gainersTable");
        tbody.innerHTML = "";

        data.forEach(g => {
            tbody.innerHTML += `<tr>
                <td>${g.name}</td>
                <td>${g.price}</td>
                <td style="color:${g.changePercent >= 0 ? 'green' : 'red'}">${g.changePercent.toFixed(2)}%</td>
                <td>${g.volume.toLocaleString()}</td>
            </tr>`;
        });
    } catch (err) {
        console.error("Error loading gainers:", err);
    }
}

loadGainers();
setInterval(loadGainers, 100); // refresh every 0.1 second
</script>
</body>
</html>
